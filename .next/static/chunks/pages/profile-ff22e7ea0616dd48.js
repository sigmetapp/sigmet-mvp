(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{6896:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return i(5224)}])},6044:function(e,t,i){"use strict";var s=i(5893);i(7294);var a=i(1664),n=i.n(a),r=i(1093);function l(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(Boolean).join(" ")}let c={sm:"text-sm px-3 py-1.5 gap-2",md:"text-sm px-4 py-2 gap-2",lg:"text-base px-5 py-3 gap-2"},o={sm:"h-9 w-9",md:"h-10 w-10",lg:"h-12 w-12"},d={primary:"text-[#0b1220] bg-[linear-gradient(90deg,#00ffc8,#7affc0)] shadow-[0_0_0_0_rgba(0,0,0,0)] hover:shadow-[0_0_24px_0_rgba(122,255,192,0.35)] focus-visible:ring-2 focus-visible:ring-[rgba(122,255,192,0.45)]",secondary:"text-[var(--accent)] border border-[color:var(--accent)]/60 bg-transparent hover:bg-[color:var(--accent)]/10 focus-visible:ring-2 focus-visible:ring-[rgba(122,255,192,0.35)]",ghost:"bg-transparent text-[var(--accent)] hover:text-white hover:[text-shadow:0_0_12px_rgba(122,255,192,0.6)] focus-visible:ring-2 focus-visible:ring-[rgba(122,255,192,0.25)]",icon:"text-[var(--text)]/80 bg-white/0 border border-white/15 hover:bg-white/10 hover:text-white focus-visible:ring-2 focus-visible:ring-[rgba(122,255,192,0.25)]",orange:"text-[#0b1220] bg-[linear-gradient(90deg,#ffd48a,#ff9b4a)] shadow-[0_0_0_0_rgba(0,0,0,0)] hover:shadow-[0_0_24px_0_rgba(255,155,74,0.35)] focus-visible:ring-2 focus-visible:ring-[rgba(255,155,74,0.45)]"};t.Z=function(e){let{variant:t="primary",size:i="md",icon:a,className:u,children:m,ariaLabel:h,href:f,...x}=e,g="icon"===t&&!m,v=l("inline-flex select-none items-center justify-center rounded-xl font-semibold focus-visible:outline-none transition will-change-transform",d[t],g?o[i]:c[i],g?"rounded-full":"rounded-xl",u),b=(0,s.jsxs)(r.E.span,{className:l("inline-flex items-center",g?"":"gap-2"),whileHover:{scale:1.03},whileTap:{scale:.98},children:[a,m&&(0,s.jsx)("span",{children:m})]});if(f){let{href:e,...t}=x;return(0,s.jsx)(n(),{href:f,"aria-label":h,className:v,...t,children:b})}let{type:p,...j}=x;return(0,s.jsx)("button",{type:p||"button","aria-label":h,className:v,...j,children:b})}},1695:function(e,t,i){"use strict";i.d(t,{Y:function(){return l}});var s=i(5893),a=i(7294),n=i(4967),r=i(1163);function l(e){let{children:t}=e,i=(0,r.useRouter)(),[l,c]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await n.O.auth.getUser();e?c(!0):i.replace("/auth")})()},[i]),l)?(0,s.jsx)(s.Fragment,{children:t}):null}},5224:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var s=i(5893),a=i(7294),n=i(6044),r=i(4967),l=i(1695);function c(){return(0,s.jsx)(l.Y,{children:(0,s.jsx)(o,{})})}function o(){var e,t;let[i,l]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(),f=(0,a.useMemo)(()=>[{id:"health",emoji:"\uD83D\uDC9A",title:"Health",desc:"Sleep, nutrition, prevention, daily energy"},{id:"thinking",emoji:"\uD83E\uDDE0",title:"Thinking",desc:"Critical thinking, focus, deep work"},{id:"learning",emoji:"\uD83D\uDCDA",title:"Learning",desc:"Skills, languages, structured mastery"},{id:"career",emoji:"\uD83E\uDDE9",title:"Career",desc:"Goals, strategy, portfolio, market impact"},{id:"finance",emoji:"\uD83D\uDCB0",title:"Finance",desc:"Income, budgeting, investing, safety buffer"},{id:"relationships",emoji:"\uD83E\uDD1D",title:"Relationships",desc:"Family, friends, network and trust"},{id:"creativity",emoji:"\uD83C\uDFA8",title:"Creativity",desc:"Projects, ideas, self expression and style"},{id:"sport",emoji:"\uD83C\uDFC3‍♂️",title:"Sport",desc:"Strength, endurance, movement and discipline"},{id:"habits",emoji:"⏱️",title:"Habits",desc:"Daily rhythm, order, life automation"},{id:"emotions",emoji:"\uD83C\uDF3F",title:"Emotions",desc:"Resilience, mindfulness, inner balance"},{id:"meaning",emoji:"✨",title:"Meaning",desc:"Values, mission, personal north star"},{id:"community",emoji:"\uD83C\uDFD9️",title:"Community",desc:"Contribution, volunteering, local projects"}],[]);async function x(){if(!c)return;let{error:e}=await r.O.from("profiles").upsert(c,{onConflict:"user_id"});h(e?e.message:"Profile saved")}async function g(){let{data:{user:e}}=await r.O.auth.getUser();if(!e||!d)return;let t="".concat(e.id,"/avatar.png"),{error:i}=await r.O.storage.from("avatars").upload(t,d,{upsert:!0});if(i){h(i.message);return}let{data:s}=r.O.storage.from("avatars").getPublicUrl(t);o(e=>({...e,avatar_url:s.publicUrl}))}return((0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await r.O.auth.getUser();if(!e)return;let{data:t}=await r.O.from("profiles").select("*").eq("user_id",e.id).maybeSingle();o(t||{user_id:e.id,username:"",full_name:"",bio:"",avatar_url:"",directions_selected:[]}),l(!1)})()},[]),i)?(0,s.jsx)("div",{className:"p-6 text-white/70",children:"Loading..."}):(0,s.jsx)("main",{className:"max-w-2xl mx-auto p-6",children:(0,s.jsxs)("div",{className:"card p-6 space-y-5",children:[(0,s.jsx)("h1",{className:"text-white text-xl font-semibold",children:"Profile settings"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("img",{src:c.avatar_url||"/avatar-fallback.png",className:"w-16 h-16 rounded-full object-cover",alt:"avatar"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"file",onChange:e=>{var t;return u((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"text-white"}),(0,s.jsx)(n.Z,{onClick:g,variant:"secondary",size:"sm",className:"ml-2",children:"Upload"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Username"}),(0,s.jsx)("input",{className:"input",value:c.username||"",onChange:e=>o({...c,username:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Full name"}),(0,s.jsx)("input",{className:"input",value:c.full_name||"",onChange:e=>o({...c,full_name:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"About"}),(0,s.jsx)("textarea",{className:"input",value:c.bio||"",onChange:e=>o({...c,bio:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium",children:"12 Areas of Growth"}),(0,s.jsx)("div",{className:"text-white/60 text-sm",children:"Pick up to three priorities. This will tailor your personal feed and plan."})]}),(0,s.jsxs)("div",{className:"text-white/70 text-sm",children:["Selected: ",(null===(e=c.directions_selected)||void 0===e?void 0:e.length)||0," of 3"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:f.map(e=>{let t=(c.directions_selected||[]).includes(e.id);return(0,s.jsx)("button",{type:"button",onClick:()=>{h(void 0),o(t=>{let i=(null==t?void 0:t.directions_selected)||[];return i.includes(e.id)?{...t,directions_selected:i.filter(t=>t!==e.id)}:i.length>=3?t:{...t,directions_selected:[...i,e.id]}})},className:"text-left rounded-2xl border px-4 py-3 transition ".concat(t?"border-white/40 bg-white/10":"border-white/10 hover:border-white/20 hover:bg-white/5"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"text-xl leading-none","aria-hidden":!0,children:e.emoji}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-white font-medium flex items-center gap-2",children:[e.title,t&&(0,s.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-white/80"})]}),(0,s.jsx)("div",{className:"text-white/60 text-sm",children:e.desc})]})]})},e.id)})}),(null==c?void 0:null===(t=c.directions_selected)||void 0===t?void 0:t.length)>3&&(0,s.jsx)("div",{className:"text-red-400 text-sm",children:"Please select up to 3 areas."})]}),m&&(0,s.jsx)("div",{className:"text-white/70 text-sm",children:m}),(0,s.jsx)(n.Z,{onClick:x,variant:"primary",className:"w-full",children:"Save"})]})})}}},function(e){e.O(0,[93,888,774,179],function(){return e(e.s=6896)}),_N_E=e.O()}]);