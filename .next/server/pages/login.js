"use strict";(()=>{var e={};e.id=459,e.ids=[459,660],e.modules={2730:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>h,getStaticProps:()=>m,reportWebVitals:()=>b,routeModule:()=>j,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>w});var r=a(7093),l=a(5244),n=a(1323),i=a(2899),o=a.n(i),u=a(5072),c=a(1237),d=e([c]);c=(d.then?(await d)():d)[0];let p=(0,n.l)(c,"default"),m=(0,n.l)(c,"getStaticProps"),h=(0,n.l)(c,"getStaticPaths"),x=(0,n.l)(c,"getServerSideProps"),g=(0,n.l)(c,"config"),b=(0,n.l)(c,"reportWebVitals"),w=(0,n.l)(c,"unstable_getStaticProps"),f=(0,n.l)(c,"unstable_getStaticPaths"),y=(0,n.l)(c,"unstable_getStaticParams"),v=(0,n.l)(c,"unstable_getServerProps"),S=(0,n.l)(c,"unstable_getServerSideProps"),j=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/login",pathname:"/login",bundlePath:"",filename:""},components:{App:u.default,Document:o()},userland:c});s()}catch(e){s(e)}})},1237:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>c});var r=a(997),l=a(6689),n=a(1163),i=a(3067),o=a(6044),u=e([o]);function c(){let e=(0,n.useRouter)(),[t,a]=(0,l.useState)("login"),[s,u]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[p,m]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),[g,b]=(0,l.useState)(null),[w,f]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),[S,j]=(0,l.useState)(""),[N,P]=(0,l.useState)(!1),[_,C]=(0,l.useState)(null);async function k(a){if(a.preventDefault(),b(null),f(null),!s||!c){b("Please enter your email and password.");return}m(!0);try{if("login"===t){let{error:t}=await i.O.auth.signInWithPassword({email:s,password:c});if(t)throw t;let{data:a}=await i.O.auth.getUser();a.user?.user_metadata?.must_change_password?e.replace("/auth/reset"):e.replace("/feed")}else{let e=process.env.NEXT_PUBLIC_REDIRECT_ORIGIN||window.location.origin,{error:t}=await i.O.auth.signUp({email:s,password:c,options:{emailRedirectTo:`${e}/auth/callback`}});if(t)throw t;f("Check your email to confirm your account.")}}catch(e){b(e?.message||"Authentication failed")}finally{m(!1)}}async function D(){v(e=>!e),C(null),b(null)}async function q(e){if(e.preventDefault(),C(null),b(null),!S.trim()){C("Please enter your email or username.");return}P(!0);try{let e=await fetch("/api/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:S.trim()})}),t=await e.json();if(!e.ok||t?.ok===!1)throw Error(t?.message||"Failed to reset password");C("If the account exists, a temporary password has been emailed.")}catch(e){C(e?.message||"Failed to reset password")}finally{P(!1)}}return r.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-white/5 backdrop-blur-md p-6 md:p-8 shadow-[0_8px_40px_rgba(0,0,0,0.25)]",children:[r.jsx("h1",{className:"text-2xl font-semibold text-white/90 mb-1",children:"login"===t?"Log in":"Sign up"}),r.jsx("p",{className:"text-white/60 text-sm mb-6",children:"login"===t?"Welcome back! Enter your credentials below.":"Create your account using email and password."}),(0,r.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,r.jsxs)("label",{className:"block",children:[r.jsx("span",{className:"text-sm text-white/70",children:"Email"}),r.jsx("input",{type:"email",autoComplete:"email",value:s,onChange:e=>u(e.target.value),className:"mt-1 w-full rounded-xl bg-transparent border border-white/10 px-3 py-2 outline-none placeholder-white/40 text-white",placeholder:"you@example.com"})]}),(0,r.jsxs)("label",{className:"block",children:[r.jsx("span",{className:"text-sm text-white/70",children:"Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[r.jsx("input",{type:h?"text":"password",autoComplete:"login"===t?"current-password":"new-password",value:c,onChange:e=>d(e.target.value),className:"w-full rounded-xl bg-transparent border border-white/10 px-3 py-2 pr-10 outline-none placeholder-white/40 text-white",placeholder:"••••••••"}),r.jsx("button",{type:"button",onClick:()=>x(e=>!e),className:"absolute right-2 top-1/2 -translate-y-1/2 text-white/60 hover:text-white","aria-label":"Toggle password visibility",children:h?"\uD83D\uDE48":"\uD83D\uDC41️"})]})]}),g&&r.jsx("div",{className:"text-red-400 text-sm",children:g}),w&&r.jsx("div",{className:"text-white/80 text-sm",children:w}),r.jsx(o.Z,{type:"submit",disabled:p,variant:"primary",className:"w-full",children:p?"login"===t?"Logging in...":"Creating...":"login"===t?"Log in":"Sign up"})]}),r.jsx("div",{className:"mt-4 text-sm text-white/70",children:"login"===t?(0,r.jsxs)(r.Fragment,{children:["Don’t have an account?"," ",r.jsx("button",{className:"underline hover:no-underline",onClick:()=>{a("signup"),b(null)},children:"Sign up"})]}):(0,r.jsxs)(r.Fragment,{children:["Already have an account?"," ",r.jsx("button",{className:"underline hover:no-underline",onClick:()=>{a("login"),b(null)},children:"Log in"})]})}),r.jsx("div",{className:"mt-2 text-xs text-white/50",children:r.jsx("button",{type:"button",className:"underline hover:no-underline",onClick:D,children:"Forgot password?"})}),y&&(0,r.jsxs)("form",{onSubmit:q,className:"mt-4 space-y-3",children:[(0,r.jsxs)("label",{className:"block",children:[r.jsx("span",{className:"text-sm text-white/70",children:"Email or username"}),r.jsx("input",{type:"text",value:S,onChange:e=>j(e.target.value),className:"mt-1 w-full rounded-xl bg-transparent border border-white/10 px-3 py-2 outline-none placeholder-white/40 text-white",placeholder:"you@example.com or your_nickname"})]}),_&&r.jsx("div",{className:"text-white/80 text-sm",children:_}),r.jsx(o.Z,{type:"submit",disabled:N,variant:"primary",className:"w-full",children:N?"Sending...":"Reset Password"})]})]})})}o=(u.then?(await u)():u)[0],s()}catch(e){s(e)}})},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},6197:e=>{e.exports=import("framer-motion")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[567,640,899,774],()=>a(2730));module.exports=s})();