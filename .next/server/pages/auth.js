(()=>{var e={};e.id=473,e.ids=[473,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},8007:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>w,default:()=>g,getServerSideProps:()=>j,getStaticPaths:()=>f,getStaticProps:()=>b,reportWebVitals:()=>v,routeModule:()=>k,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>N});var r={};s.r(r),s.d(r,{default:()=>p});var i=s(7093),a=s(5244),l=s(1323),n=s(2899),c=s.n(n),d=s(5072),o=s(997),h=s(6689),u=s(3067),m=s(1664),x=s.n(m);function p(){let[e,t]=(0,h.useState)("signin"),[s,r]=(0,h.useState)(""),[i,a]=(0,h.useState)(""),[l,n]=(0,h.useState)(!1),[c,d]=(0,h.useState)(),[m,p]=(0,h.useState)(!1),[g,b]=(0,h.useState)(""),[f,j]=(0,h.useState)(!1),[w,v]=(0,h.useState)(null);async function N(t){t.preventDefault(),n(!0),d(void 0);try{if("signup"===e){let e=process.env.NEXT_PUBLIC_REDIRECT_ORIGIN||window.location.origin,{error:t}=await u.O.auth.signUp({email:s,password:i,options:{emailRedirectTo:`${e}/auth/callback`}});if(t)throw t;d("Account created. Please confirm your email.")}else{let{error:e}=await u.O.auth.signInWithPassword({email:s,password:i});if(e)throw e;let{data:t}=await u.O.auth.getUser(),r=!!t.user?.user_metadata?.must_change_password;window.location.href=r?"/auth/reset":"/"}}catch(e){d(e.message||"Auth error")}finally{n(!1)}}async function S(){p(e=>!e),v(null)}async function P(e){if(e.preventDefault(),v(null),!g.trim()){v("Please enter your email or username.");return}j(!0);try{let e=await fetch("/api/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:g.trim()})}),t=await e.json();if(!e.ok||t?.ok===!1)throw Error(t?.message||"Failed to reset password");v("If the account exists, a temporary password has been emailed.")}catch(e){v(e?.message||"Failed to reset password")}finally{j(!1)}}return(0,o.jsxs)("div",{className:"min-h-screen grid md:grid-cols-2",children:[(0,o.jsxs)("div",{className:"hidden md:flex flex-col justify-between p-10 bg-sigmet",children:[o.jsx(x(),{href:"/",className:"text-white/90 text-xl font-semibold",children:"Sigmet"}),(0,o.jsxs)("div",{children:[o.jsx("h1",{className:"text-white text-4xl font-semibold mb-4",children:"Welcome back"}),o.jsx("p",{className:"text-white/70",children:"Sign in with email and password. Magic links are disabled."})]}),(0,o.jsxs)("div",{className:"text-white/40 text-xs",children:["\xa9 ",new Date().getFullYear()," Sigmet"]})]}),o.jsx("div",{className:"flex items-center justify-center p-6 md:p-12 bg-base.bg",children:(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsxs)("div",{className:"flex gap-2 bg-white/5 p-1 rounded-xl mb-6",children:[o.jsx("button",{onClick:()=>t("signin"),className:`flex-1 py-2 rounded-lg text-sm ${"signin"===e?"bg-white text-black":"text-white/80"}`,children:"Sign in"}),o.jsx("button",{onClick:()=>t("signup"),className:`flex-1 py-2 rounded-lg text-sm ${"signup"===e?"bg-white text-black":"text-white/80"}`,children:"Create account"})]}),(0,o.jsxs)("form",{onSubmit:N,className:"card p-6 space-y-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"label",children:"Email"}),o.jsx("input",{className:"input",type:"email",value:s,onChange:e=>r(e.target.value),required:!0,placeholder:"you@example.com"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"label",children:"Password"}),o.jsx("input",{className:"input",type:"password",value:i,onChange:e=>a(e.target.value),required:!0,placeholder:"Minimum 6 characters"})]}),c&&o.jsx("div",{className:"text-white/80 text-sm",children:c}),o.jsx("button",{type:"submit",disabled:l,className:"btn btn-primary w-full disabled:opacity-60",children:l?"Please wait":"signin"===e?"Sign in":"Create account"}),o.jsx("button",{type:"button",onClick:S,className:"w-full text-white/70 text-sm hover:text-white mt-2",children:"Forgot password"})]}),m&&(0,o.jsxs)("form",{onSubmit:P,className:"card p-6 mt-4 space-y-3",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"label",children:"Email or username"}),o.jsx("input",{className:"input",type:"text",value:g,onChange:e=>b(e.target.value),placeholder:"you@example.com or your_nickname"})]}),w&&o.jsx("div",{className:"text-white/80 text-sm",children:w}),o.jsx("button",{type:"submit",disabled:f,className:"btn btn-primary w-full disabled:opacity-60",children:f?"Sending...":"Reset Password"})]})]})})]})}let g=(0,l.l)(r,"default"),b=(0,l.l)(r,"getStaticProps"),f=(0,l.l)(r,"getStaticPaths"),j=(0,l.l)(r,"getServerSideProps"),w=(0,l.l)(r,"config"),v=(0,l.l)(r,"reportWebVitals"),N=(0,l.l)(r,"unstable_getStaticProps"),S=(0,l.l)(r,"unstable_getStaticPaths"),P=(0,l.l)(r,"unstable_getStaticParams"),y=(0,l.l)(r,"unstable_getServerProps"),_=(0,l.l)(r,"unstable_getServerSideProps"),k=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/auth",pathname:"/auth",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:r})},4929:(e,t,s)=>{"use strict";s.d(t,{h:()=>n,m:()=>l});var r=s(997),i=s(6689);s(3067);let a=(0,i.createContext)({site_name:null,logo_url:null});function l({children:e}){let[t,s]=(0,i.useState)({site_name:null,logo_url:null});return r.jsx(a.Provider,{value:t,children:e})}function n(){return(0,i.useContext)(a)}},3067:(e,t,s)=>{"use strict";s.d(t,{O:()=>r});let r=(0,s(2885).createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)},5072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(997);s(6764);var i=s(1664),a=s.n(i),l=s(5675),n=s.n(l),c=s(1163),d=s(6689),o=s(4929),h=s(3067);let u=[{href:"/",label:"Home"},{href:"/feed",label:"Feed"},{href:"/profile",label:"Profile"},{href:"/settings",label:"Settings"}];function m(){let{logo_url:e,site_name:t}=(0,o.h)(),[s,i]=(0,d.useState)(null),l=(0,c.useRouter)();async function m(){await h.O.auth.signOut(),l.push("/login")}return r.jsx("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-black/30 backdrop-blur supports-[backdrop-filter]:bg-black/30",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 h-14 flex items-center gap-3",children:[(0,r.jsxs)(a(),{href:"/",className:"flex items-center gap-2 group",children:[e?r.jsx(n(),{src:e,alt:"Logo",width:36,height:36,className:"rounded-md"}):r.jsx("div",{className:"h-9 w-9 rounded-md bg-white/10 grid place-items-center border border-white/10",children:"S"}),r.jsx("span",{className:"text-white/90 font-semibold tracking-tight",children:t||"SIGMET"})]}),(0,r.jsxs)("nav",{className:"ml-auto flex items-center gap-1",children:[u.map(e=>{let t=l.pathname===e.href;return r.jsx(a(),{href:e.href,className:`px-3 py-1.5 rounded-lg text-sm transition ${t?"bg-white text-black":"text-white/75 hover:text-white hover:bg-white/10"}`,children:e.label},e.href)}),s?r.jsx("button",{onClick:m,className:"ml-2 px-3 py-1.5 rounded-lg text-sm border border-white/20 text-white/80 hover:bg-white/10 transition",children:"Logout"}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(a(),{href:"/login",className:"ml-2 px-3 py-1.5 rounded-lg text-sm border border-white/20 text-white/80 hover:bg-white/10 transition",children:"Log in"}),r.jsx(a(),{href:"/signup",className:"ml-2 px-3 py-1.5 rounded-lg text-sm bg-white text-black hover:opacity-90 transition",children:"Sign up"})]})]})]})})}function x(){let{site_name:e}=(0,o.h)(),t=new Date().getFullYear();return r.jsx("footer",{className:"border-t border-white/10 bg-black/30",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-10 text-sm text-white/70",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"h-8 w-8 rounded-md bg-white/10 grid place-items-center border border-white/10",children:"S"}),r.jsx("span",{className:"text-white font-semibold tracking-tight",children:e||"SIGMET"})]}),r.jsx("p",{className:"text-white/50 max-w-xs",children:"Build your social weight with meaningful progress and transparent reputation."})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-white/80 font-medium mb-3",children:"Product"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(a(),{className:"hover:text-white",href:"/feed",children:"Feed"})}),r.jsx("li",{children:r.jsx(a(),{className:"hover:text-white",href:"/profile",children:"Profile"})}),r.jsx("li",{children:r.jsx(a(),{className:"hover:text-white",href:"/settings",children:"Settings"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-white/80 font-medium mb-3",children:"Company"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx("a",{className:"hover:text-white",href:"https://sigmet.app",target:"_blank",rel:"noreferrer",children:"Website"})}),r.jsx("li",{children:r.jsx("a",{className:"hover:text-white",href:"mailto:hello@sigmet.app",children:"Contact"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-white/80 font-medium mb-3",children:"Social"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx("a",{className:"hover:text-white",href:"https://twitter.com",target:"_blank",rel:"noreferrer",children:"Twitter"})}),r.jsx("li",{children:r.jsx("a",{className:"hover:text-white",href:"https://github.com",target:"_blank",rel:"noreferrer",children:"GitHub"})})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 border-t border-white/10 pt-4 flex items-center justify-between text-xs md:text-sm",children:[(0,r.jsxs)("span",{children:["\xa9 ",t," ",e||"SIGMET",". All rights reserved."]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(a(),{href:"/settings",className:"hover:text-white",children:"Settings"}),r.jsx("a",{href:"https://sigmet.app",target:"_blank",rel:"noreferrer",className:"hover:text-white",children:"sigmet.app"})]})]})]})})}function p({children:e}){return(0,r.jsxs)("div",{className:"relative min-h-[100dvh] bg-sigmet",children:[r.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 z-0 bg-dot-grid opacity-20"}),(0,r.jsxs)("div",{className:"relative z-10 min-h-[100dvh] flex flex-col",children:[r.jsx(m,{}),r.jsx("main",{className:"flex-1",children:e}),r.jsx(x,{})]})]})}function g({Component:e,pageProps:t}){return r.jsx(o.m,{children:r.jsx(p,{children:r.jsx(e,{...t})})})}},6764:()=>{},5244:(e,t)=>{"use strict";var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},2885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[567,640,899],()=>s(8007));module.exports=r})();